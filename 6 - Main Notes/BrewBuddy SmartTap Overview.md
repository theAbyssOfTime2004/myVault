2026-01-19 14:20


Tags: [[TigerTribe]], [[HNK-SMARTAP-BREWBUDDY]]

# Overview Architecture
┌─────────────────────────────────────────────────────────────┐
│                    FastAPI Application                       │
│                    (main.py)                                 │
└──────────────────────┬──────────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────────────────────┐
│              API Layer (app/api/chat.py)                     │
│  - Authentication (X-API-KEY)                                │
│  - Request Validation                                         │
│  - Error Handling                                             │
└──────────────────────┬──────────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────────────────────┐
│         Workflow Layer (BeerOrderingWorkflow)                │
│  ┌──────────┐  ┌──────────────┐  ┌──────────────┐          │
│  │ Prepare  │→ │   Parallel   │→ │    Router    │          │
│  │   Step   │  │   Analysis   │  │   Decision   │          │
│  └──────────┘  └──────┬───────┘  └──────┬───────┘          │
│                       │                  │                   │
│              ┌────────┴────────┐         │                   │
│              │                │         │                   │
│      ┌───────▼──────┐  ┌──────▼──────┐  │                   │
│      │ Compliance   │  │ Information │  │                   │
│      │   Check      │  │ Extraction  │  │                   │
│      └──────────────┘  └─────────────┘  │                   │
│              │                  │         │                   │
│              └────────┬────────┘         │                   │
│                       │                  │                   │
│              ┌────────▼──────────────────▼──────┐           │
│              │      Decision & Finalize          │           │
│              └──────────────────────────────────┘           │
└─────────────────────────────────────────────────────────────┘
                       │
        ┌──────────────┼──────────────┐
        │              │              │
        ▼              ▼              ▼
┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│  Compliance  │ │ Information  │ │    State     │
│   Service    │ │  Extraction  │ │  Management  │
│              │ │   Service     │ │   Service    │
└──────┬───────┘ └──────┬───────┘ └──────┬───────┘
       │                │                 │
       └────────────────┼─────────────────┘
                        │
                        ▼
              ┌──────────────────┐
              │  Agent Service   │
              │  (Azure OpenAI)  │
              └────────┬─────────┘
                       │
        ┌──────────────┼──────────────┐
        │              │              │
        ▼              ▼              ▼
┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│   Redis DB   │ │ Azure Blob   │ │   System     │
│  (Memory)    │ │  Storage     │ │   Prompts    │
└──────────────┘ └──────────────┘ └──────────────┘
 

# References
